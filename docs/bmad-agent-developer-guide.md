# BMAD Agent å¼€å‘å®Œæ•´æŒ‡å—

## ç›®å½•
1. [BMADæ¦‚è¿°ä¸æ ¸å¿ƒç†å¿µ](#1-bmadæ¦‚è¿°ä¸æ ¸å¿ƒç†å¿µ)
2. [åº•å±‚é€»è¾‘æ¢³ç†](#2-åº•å±‚é€»è¾‘æ¢³ç†)
3. [ç³»ç»Ÿæ¶æ„æ·±åº¦è§£æ](#3-ç³»ç»Ÿæ¶æ„æ·±åº¦è§£æ)
4. [è¯¦ç»†å¼€å‘æ­¥éª¤è¯´æ˜](#4-è¯¦ç»†å¼€å‘æ­¥éª¤è¯´æ˜)
5. [æœ€ä½³å®è·µå»ºè®®](#5-æœ€ä½³å®è·µå»ºè®®)
6. [å®æˆ˜æ¡ˆä¾‹ï¼šåŸºäºæ‚¨çš„é¡¹ç›®](#6-å®æˆ˜æ¡ˆä¾‹åŸºäºæ‚¨çš„é¡¹ç›®)
7. [æ•…éšœæ’é™¤ä¸è°ƒè¯•](#7-æ•…éšœæ’é™¤ä¸è°ƒè¯•)
8. [è¿›é˜¶æŠ€å·§ä¸ä¼˜åŒ–](#8-è¿›é˜¶æŠ€å·§ä¸ä¼˜åŒ–)

---

## 1. BMADæ¦‚è¿°ä¸æ ¸å¿ƒç†å¿µ

### 1.1 ä»€ä¹ˆæ˜¯BMADï¼Ÿ

BMADï¼ˆBusiness Model Architecture Designï¼‰æ˜¯ä¸€å¥—åŸºäº**AI Agentè§’è‰²æ‰®æ¼”**çš„è½¯ä»¶å¼€å‘æ–¹æ³•è®ºã€‚å®ƒé€šè¿‡æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„å¼€å‘å›¢é˜Ÿï¼Œè®©ä¸åŒçš„AI agentæ‰¿æ‹…ä¸åŒçš„ä¸“ä¸šè§’è‰²ï¼Œä»¥ç»“æ„åŒ–çš„å·¥ä½œæµç¨‹åä½œå®Œæˆè½¯ä»¶é¡¹ç›®ã€‚

### 1.2 æ ¸å¿ƒç†å¿µ

1. **è§’è‰²åˆ†å·¥**ï¼šæ¯ä¸ªagentéƒ½æœ‰æ˜ç¡®çš„è§’è‰²å®šä½å’Œä¸“ä¸šé¢†åŸŸ
2. **æµç¨‹é©±åŠ¨**ï¼šæ‰€æœ‰å·¥ä½œéƒ½é€šè¿‡é¢„å®šä¹‰çš„å·¥ä½œæµç¨‹æ‰§è¡Œ
3. **æ–‡æ¡£ä¼˜å…ˆ**ï¼šæ‰€æœ‰å†³ç­–å’Œè¾“å‡ºéƒ½ä»¥ç»“æ„åŒ–æ–‡æ¡£å½¢å¼è®°å½•
4. **çŠ¶æ€ç®¡ç†**ï¼šé€šè¿‡çŠ¶æ€æ–‡ä»¶è·Ÿè¸ªé¡¹ç›®è¿›å±•å’Œä»»åŠ¡çŠ¶æ€
5. **ä¸Šä¸‹æ–‡ä¿æŒ**ï¼šé€šè¿‡XMLæ–‡ä»¶ç­‰æ ¼å¼ç»´æŠ¤agenté—´çš„ä¸Šä¸‹æ–‡ä¼ é€’

### 1.3 ä¸ºä»€ä¹ˆé€‰æ‹©BMADï¼Ÿ

- **ä¸€è‡´æ€§**ï¼šæ ‡å‡†åŒ–æµç¨‹ç¡®ä¿è¾“å‡ºè´¨é‡ä¸€è‡´
- **å¯è¿½æº¯**ï¼šæ¯ä¸ªå†³ç­–éƒ½æœ‰æ˜ç¡®çš„æ¥æºå’Œè´£ä»»äºº
- **å¯æ‰©å±•**ï¼šæ˜“äºæ·»åŠ æ–°çš„agentå’Œå·¥ä½œæµç¨‹
- **è‡ªåŠ¨åŒ–**ï¼šå‡å°‘äººå·¥å¹²é¢„ï¼Œæé«˜å¼€å‘æ•ˆç‡

---

## 2. åº•å±‚é€»è¾‘æ¢³ç†

### 2.1 æ ¸å¿ƒç»„ä»¶å…³ç³»å›¾

```
BMAD System Architecture
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Config Layer                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ bmm/config  â”‚  â”‚core/config  â”‚  â”‚Local Configsâ”‚        â”‚
â”‚  â”‚    .yaml    â”‚  â”‚    .yaml    â”‚  â”‚   .yaml     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Agent Layer                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Agents    â”‚  â”‚   Tasks     â”‚  â”‚    Teams    â”‚        â”‚
â”‚  â”‚   (Personas)â”‚  â”‚ (Units)     â”‚  â”‚ (Groups)    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Workflow Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Workflow    â”‚  â”‚ Instructionsâ”‚  â”‚ Validation  â”‚        â”‚
â”‚  â”‚    Engine   â”‚  â”‚ Processor   â”‚  â”‚   System    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Output Layer                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Stories   â”‚  â”‚   Context   â”‚  â”‚  Status     â”‚        â”‚
â”‚  â”‚  (MD Files) â”‚  â”‚  (XML)      â”‚  â”‚ Tracking    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å·¥ä½œæµç¨‹æ‰§è¡ŒåŸç†

#### 2.2.1 æ¿€æ´»æµç¨‹ (Activation Flow)

1. **é…ç½®åŠ è½½**ï¼šAgenté¦–å…ˆè¯»å–é…ç½®æ–‡ä»¶è·å–å¿…è¦å‚æ•°
2. **å˜é‡è§£æ**ï¼šè§£æ`{project-root}`ã€`{user_name}`ç­‰å˜é‡
3. **èœå•å±•ç¤º**ï¼šæ˜¾ç¤ºå¯ç”¨çš„æ“ä½œé€‰é¡¹
4. **ç­‰å¾…è¾“å…¥**ï¼šæš‚åœç­‰å¾…ç”¨æˆ·é€‰æ‹©

#### 2.2.2 å·¥ä½œæµæ‰§è¡Œå¼•æ“

**æ ¸å¿ƒå¼•æ“**ï¼š`bmad/core/tasks/workflow.xml`

```xml
<flow>
  <step n="1">åŠ è½½å’Œåˆå§‹åŒ–å·¥ä½œæµ</step>
  <step n="2">å¤„ç†æ¯ä¸ªæŒ‡ä»¤æ­¥éª¤</step>
  <step n="3">å®Œæˆ</step>
</flow>
```

**å…³é”®ç‰¹æ€§**ï¼š
- **é¡ºåºæ‰§è¡Œ**ï¼šä¸¥æ ¼æŒ‰ç…§æ­¥éª¤ç¼–å·æ‰§è¡Œ
- **å˜é‡æ›¿æ¢**ï¼šè‡ªåŠ¨æ›¿æ¢`{{variables}}`
- **æ¡ä»¶æ‰§è¡Œ**ï¼šæ”¯æŒ`if`æ¡ä»¶åˆ¤æ–­
- **æ¨¡æ¿è¾“å‡º**ï¼šæ”¯æŒ`template-output`æ£€æŸ¥ç‚¹

#### 2.2.3 Agentäº¤äº’æœºåˆ¶

```
Agent Communication Flow
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    XML Context     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Agent A  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚    Agent B  â”‚
â”‚ (e.g., PM)  â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ (e.g., Dev) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   Status Updates   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                              â”‚
       â†“ Status File                  â†“ Status File
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚bmm-workflow â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Story Files â”‚
â”‚ -status.md  â”‚   Progress   â”‚    (.md)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ç³»ç»Ÿæ¶æ„æ·±åº¦è§£æ

### 3.1 ç›®å½•ç»“æ„è¯¦è§£

```
bmad/
â”œâ”€â”€ bmm/                          # Business Model Module
â”‚   â”œâ”€â”€ agents/                   # Agentè§’è‰²å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ architect.md         # æ¶æ„å¸ˆ (Winston)
â”‚   â”‚   â”œâ”€â”€ dev.md               # å¼€å‘è€… (Amelia)
â”‚   â”‚   â”œâ”€â”€ pm.md                # äº§å“ç»ç† (Sarah)
â”‚   â”‚   â”œâ”€â”€ sm.md                # Scrum Master (Bob)
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ tasks/                    # åŸºç¡€ä»»åŠ¡å•å…ƒ
â”‚   â”‚   â”œâ”€â”€ daily-standup.xml    # æ¯æ—¥ç«™ä¼š
â”‚   â”‚   â””â”€â”€ retrospective.xml     # å›é¡¾ä¼šè®®
â”‚   â”œâ”€â”€ workflows/                # å·¥ä½œæµç¨‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ 1-analysis/          # åˆ†æé˜¶æ®µ
â”‚   â”‚   â”œâ”€â”€ 2-plan-workflows/    # è®¡åˆ’é˜¶æ®µ
â”‚   â”‚   â”œâ”€â”€ 3-solutioning/       # è§£å†³æ–¹æ¡ˆé˜¶æ®µ
â”‚   â”‚   â””â”€â”€ 4-implementation/    # å®ç°é˜¶æ®µ
â”‚   â”œâ”€â”€ teams/                    # å›¢é˜Ÿé…ç½®
â”‚   â””â”€â”€ config.yaml              # BMMé…ç½®
â”œâ”€â”€ core/                         # æ ¸å¿ƒå¼•æ“
â”‚   â””â”€â”€ tasks/
â”‚       â””â”€â”€ workflow.xml         # å·¥ä½œæµæ‰§è¡Œå¼•æ“
â””â”€â”€ _cfg/                         # ç³»ç»Ÿé…ç½®
    â”œâ”€â”€ agent-manifest.csv       # Agentæ¸…å•
    â””â”€â”€ workflow-manifest.csv    # å·¥ä½œæµæ¸…å•
```

### 3.2 Agentç»“æ„åˆ†æ

æ¯ä¸ªAgentéƒ½æœ‰æ ‡å‡†åŒ–çš„ç»“æ„ï¼š

```xml
<agent id="path/to/agent.md" name="Name" title="Role" icon="ğŸ¯">
<activation critical="MANDATORY">
  <!-- æ¿€æ´»æ­¥éª¤ -->
</activation>
<persona>
  <!-- è§’è‰²å®šä¹‰ -->
</persona>
<menu>
  <!-- å¯ç”¨æ“ä½œ -->
</menu>
</agent>
```

**å…³é”®ç»„ä»¶**ï¼š
- **æ¿€æ´»åºåˆ—**ï¼šå®šä¹‰Agentçš„å¯åŠ¨æµç¨‹
- **äººè®¾æè¿°**ï¼šå®šä¹‰Agentçš„ä¸“ä¸šèƒŒæ™¯å’Œæ²Ÿé€šé£æ ¼
- **æ“ä½œèœå•**ï¼šå®šä¹‰Agentå¯æ‰§è¡Œçš„å‘½ä»¤
- **å¤„ç†å™¨**ï¼šå®šä¹‰å¦‚ä½•å¤„ç†ä¸åŒç±»å‹çš„æ“ä½œ

### 3.3 å·¥ä½œæµç»“æ„åˆ†æ

æ¯ä¸ªå·¥ä½œæµéƒ½åŒ…å«ï¼š

```yaml
name: workflow-name
description: "å·¥ä½œæµæè¿°"
author: "BMad"

# é…ç½®æº
config_source: "{project-root}/bmad/bmm/config.yaml"
output_folder: "{config_source}:output_folder"

# ç»„ä»¶è·¯å¾„
installed_path: "{project-root}/bmad/bmm/workflows/path"
template: "{installed_path}/template.md"
instructions: "{installed_path}/instructions.md"
validation: "{installed_path}/checklist.md"

# å˜é‡å®šä¹‰
variables:
  variable_name: "default_value"

# è¾“å‡ºé…ç½®
default_output_file: "{output_folder}/output.md"
```

---

## 4. è¯¦ç»†å¼€å‘æ­¥éª¤è¯´æ˜

### 4.1 ç¯å¢ƒå‡†å¤‡é˜¶æ®µ

#### æ­¥éª¤1ï¼šåˆ›å»ºBMADé¡¹ç›®ç»“æ„

```bash
# 1. åˆ›å»ºåŸºç¡€ç›®å½•
mkdir -p bmad/{bmm,core,_cfg}
mkdir -p bmad/bmm/{agents,tasks,workflows,teams}
mkdir -p bmad/core/tasks

# 2. åˆ›å»ºé…ç½®æ–‡ä»¶
touch bmad/bmm/config.yaml
touch bmad/core/config.yaml

# 3. åˆ›å»ºæ ¸å¿ƒå¼•æ“
touch bmad/core/tasks/workflow.xml
```

#### æ­¥éª¤2ï¼šé…ç½®ç³»ç»Ÿå‚æ•°

**bmad/bmm/config.yaml**ï¼š
```yaml
project_name: your-project
tech_docs: '{project-root}/docs'
dev_story_location: '{project-root}/docs/stories'
kb_location: ~/bmad/bmm/kb.md
user_name: Your Name
communication_language: English
output_folder: '{project-root}/docs'
```

**bmad/core/config.yaml**ï¼š
```yaml
user_name: Your Name
communication_language: English
output_folder: '{project-root}/docs'
```

### 4.2 Agentå¼€å‘é˜¶æ®µ

#### æ­¥éª¤3ï¼šåˆ›å»ºAgentè§’è‰²

ä»¥åˆ›å»ºå¼€å‘è€…Agentä¸ºä¾‹ï¼š

**bmad/bmm/agents/dev.md**ï¼š
```markdown
<!-- Powered by BMAD-COREâ„¢ -->

# Developer Agent

```xml
<agent id="bmad/bmm/agents/dev.md" name="Amelia" title="Developer Agent" icon="ğŸ’»">
<activation critical="MANDATORY">
  <step n="1">åŠ è½½é…ç½®æ–‡ä»¶</step>
  <step n="2">å­˜å‚¨ä¼šè¯å˜é‡</step>
  <step n="3">æ˜¾ç¤ºèœå•</step>
  <step n="4">ç­‰å¾…ç”¨æˆ·è¾“å…¥</step>
</activation>

<persona>
  <role>Senior Implementation Engineer</role>
  <identity>æ‰§è¡Œå·²æ‰¹å‡†çš„ç”¨æˆ·æ•…äº‹ï¼Œä¸¥æ ¼éµå¾ªéªŒæ”¶æ ‡å‡†</identity>
  <communication_style>ç®€æ´ã€æ¸…å•é©±åŠ¨ã€å¼•ç”¨è·¯å¾„å’ŒAC ID</communication_style>
  <principles>å°†Story Context XMLè§†ä¸ºå”¯ä¸€çœŸå®æ¥æº</principles>
</persona>

<menu>
  <item cmd="*help">æ˜¾ç¤ºèœå•</item>
  <item cmd="*develop" workflow="path/to/dev-workflow.yaml">å¼€å‘ç”¨æˆ·æ•…äº‹</item>
  <item cmd="*exit">é€€å‡º</item>
</menu>
</agent>
```

#### æ­¥éª¤4ï¼šåˆ›å»ºå·¥ä½œæµç¨‹

**å¼€å‘å·¥ä½œæµç¤ºä¾‹**ï¼š
```yaml
name: dev-story
description: "æ‰§è¡Œç”¨æˆ·æ•…äº‹å¼€å‘å·¥ä½œæµ"
author: "BMad"

config_source: "{project-root}/bmad/bmm/config.yaml"
variables:
  story_file: ""
  story_id: ""

installed_path: "{project-root}/bmad/bmm/workflows/4-implementation/dev-story"
template: "{installed_path}/template.md"
instructions: "{installed_path}/instructions.md"
validation: "{installed_path}/checklist.md"

default_output_file: "{story_file}"
```

**å·¥ä½œæµæŒ‡ä»¤**ï¼š
```markdown
# å¼€å‘å·¥ä½œæµæŒ‡ä»¤

````xml
<workflow>
  <step n="1" goal="åŠ è½½æ•…äº‹ä¸Šä¸‹æ–‡">
    <action>è¯»å–ç”¨æˆ·æ•…äº‹æ–‡ä»¶</action>
    <action>åŠ è½½Story Context XML</action>
    <action>éªŒè¯æ•…äº‹çŠ¶æ€ä¸º"Approved"</action>
  </step>

  <step n="2" goal="åˆ†æéªŒæ”¶æ ‡å‡†">
    <action>æå–æ‰€æœ‰éªŒæ”¶æ ‡å‡†</action>
    <action>æ˜ å°„åˆ°å…·ä½“å®ç°ä»»åŠ¡</action>
    <template-output file="{story_file}">implementation_plan</template-output>
  </step>

  <step n="3" goal="æ‰§è¡Œå¼€å‘">
    <action>æŒ‰é¡ºåºå®ç°æ¯ä¸ªä»»åŠ¡</action>
    <action>ç¼–å†™æµ‹è¯•ç”¨ä¾‹</action>
    <action>è¿è¡Œæµ‹è¯•ç¡®ä¿100%é€šè¿‡</action>
  </step>
</workflow>
````
```

### 4.3 é›†æˆä¸æµ‹è¯•é˜¶æ®µ

#### æ­¥éª¤5ï¼šåˆ›å»ºéªŒè¯æ¸…å•

**bmad/bmm/workflows/4-implementation/dev-story/checklist.md**ï¼š
```markdown
# å¼€å‘å·¥ä½œæµéªŒè¯æ¸…å•

## éªŒæ”¶æ ‡å‡†éªŒè¯
- [ ] æ‰€æœ‰éªŒæ”¶æ ‡å‡†å·²å®ç°
- [ ] æµ‹è¯•ç”¨ä¾‹è¦†ç›–æ‰€æœ‰åœºæ™¯
- [ ] æµ‹è¯•100%é€šè¿‡

## ä»£ç è´¨é‡
- [ ] éµå¾ªé¡¹ç›®ç¼–ç è§„èŒƒ
- [ ] ä»£ç å·²é€šè¿‡é™æ€åˆ†æ
- [ ] æ–‡æ¡£å·²æ›´æ–°

## çŠ¶æ€æ›´æ–°
- [ ] æ•…äº‹çŠ¶æ€å·²æ›´æ–°ä¸º"Done"
- [ ] å¼€å‘è®°å½•å·²å¡«å†™
- [ ] ä¸Šä¸‹æ–‡æ–‡ä»¶å·²ä¿å­˜
```

#### æ­¥éª¤6ï¼šåˆ›å»ºçŠ¶æ€ç®¡ç†

**çŠ¶æ€è·Ÿè¸ªæ–‡ä»¶ç»“æ„**ï¼š
```markdown
# bmm-workflow-status.md

## é¡¹ç›®è¿›åº¦
- å½“å‰é˜¶æ®µï¼šå®ç°é˜¶æ®µ (Phase 4)
- æ€»ä½“è¿›åº¦ï¼š65%

## å½“å‰å·¥ä½œæµ
- å½“å‰æ­¥éª¤ï¼šdev-story (Story 1.1)
- çŠ¶æ€ï¼šè¿›è¡Œä¸­

## æ•…äº‹çŠ¶æ€
#### DONE
| Story ID | Title | å®Œæˆæ—¥æœŸ |
|----------|-------|----------|

#### IN PROGRESS
| Story ID | Title | è¿›åº¦ |
|----------|-------|------|

#### TODO (Needs Drafting)
- Story 1.2: Next Story Title
```

---

## 5. æœ€ä½³å®è·µå»ºè®®

### 5.1 Agentè®¾è®¡åŸåˆ™

#### 5.1.1 å•ä¸€èŒè´£åŸåˆ™
æ¯ä¸ªAgentåº”è¯¥æœ‰æ˜ç¡®çš„è§’è‰²è¾¹ç•Œï¼š
- **äº§å“ç»ç† (PM)**ï¼šè´Ÿè´£éœ€æ±‚å®šä¹‰å’Œä¼˜å…ˆçº§
- **æ¶æ„å¸ˆ (Architect)**ï¼šè´Ÿè´£æŠ€æœ¯è®¾è®¡å’Œæ¶æ„å†³ç­–
- **å¼€å‘è€… (Dev)**ï¼šè´Ÿè´£ä»£ç å®ç°å’Œæµ‹è¯•
- **æµ‹è¯•å·¥ç¨‹å¸ˆ (TEA)**ï¼šè´Ÿè´£æµ‹è¯•ç­–ç•¥å’Œè´¨é‡ä¿è¯

#### 5.1.2 ä¸Šä¸‹æ–‡ä¿æŒåŸåˆ™
- ä½¿ç”¨XMLæ ¼å¼ä¼ é€’agenté—´çš„ä¸Šä¸‹æ–‡
- ä¿æŒä¸Šä¸‹æ–‡æ–‡ä»¶çš„ç‰ˆæœ¬æ§åˆ¶
- é¿å…ä¿¡æ¯ä¸¢å¤±å’Œé‡å¤å·¥ä½œ

#### 5.1.3 çŠ¶æ€ä¸€è‡´æ€§åŸåˆ™
- ç»Ÿä¸€çš„çŠ¶æ€æ–‡ä»¶æ ¼å¼
- å®æ—¶æ›´æ–°è¿›åº¦ä¿¡æ¯
- å®šæœŸåŒæ­¥çŠ¶æ€æ•°æ®

### 5.2 å·¥ä½œæµè®¾è®¡æ¨¡å¼

#### 5.2.1 æ¨¡æ¿é©±åŠ¨æ¨¡å¼
```xml
<template-output file="{output_file}">
  section_name
</template-output>
```

**ä¼˜ç‚¹**ï¼š
- è¾“å‡ºæ ¼å¼ç»Ÿä¸€
- æ˜“äºç»´æŠ¤å’Œæ›´æ–°
- æ”¯æŒå¢é‡ç”Ÿæˆ

#### 5.2.2 æ¡ä»¶æ‰§è¡Œæ¨¡å¼
```xml
<check if="condition">
  <action>æ‰§è¡Œæ¡ä»¶æ»¡è¶³æ—¶çš„æ“ä½œ</action>
</check>
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- å¯é€‰åŠŸèƒ½æ¨¡å—
- ç¯å¢ƒç›¸å…³çš„é…ç½®
- ç”¨æˆ·é€‰æ‹©çš„æµç¨‹

#### 5.2.3 å¾ªç¯è¿­ä»£æ¨¡å¼
```xml
<for-each="item_collection">
  <action>å¯¹æ¯ä¸ªé¡¹ç›®æ‰§è¡Œæ“ä½œ</action>
</for-each>
```

**åº”ç”¨åœºæ™¯**ï¼š
- æ‰¹é‡å¤„ç†æ•…äº‹
- å¤šæ–‡ä»¶æ“ä½œ
- é‡å¤æ€§ä»»åŠ¡

### 5.3 æ–‡æ¡£ç®¡ç†ç­–ç•¥

#### 5.3.1 æ–‡ä»¶å‘½åè§„èŒƒ
- **æ•…äº‹æ–‡ä»¶**ï¼š`story-{epic}.{story}.md`
- **ä¸Šä¸‹æ–‡æ–‡ä»¶**ï¼š`story-context-{story-id}.xml`
- **çŠ¶æ€æ–‡ä»¶**ï¼š`bmm-workflow-status-{date}.md`
- **éªŒè¯æŠ¥å‘Š**ï¼š`validation-report-{timestamp}.md`

#### 5.3.2 ç‰ˆæœ¬æ§åˆ¶å»ºè®®
- æ‰€æœ‰ç”Ÿæˆæ–‡ä»¶éƒ½åº”çº³å…¥ç‰ˆæœ¬æ§åˆ¶
- ä½¿ç”¨æœ‰æ„ä¹‰çš„æäº¤ä¿¡æ¯
- å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶

#### 5.3.3 æ–‡æ¡£ç»“æ„æ ‡å‡†åŒ–
```markdown
# Story Title

## åŸºæœ¬ä¿¡æ¯
- **Story ID**: 1.1
- **Epic**: 1
- **çŠ¶æ€**: Draft

## éªŒæ”¶æ ‡å‡†
1. AC 1
2. AC 2

## ä»»åŠ¡åˆ†è§£
- [ ] Task 1
- [ ] Task 2

## å¼€å‘è®°å½•
### Agent Notes
...

### TEA Results
...

### PO Notes
...
```

### 5.4 é”™è¯¯å¤„ç†ä¸è°ƒè¯•

#### 5.4.1 å¸¸è§é”™è¯¯ç±»å‹

**é…ç½®é”™è¯¯**ï¼š
- é…ç½®æ–‡ä»¶è·¯å¾„é”™è¯¯
- å˜é‡æœªå®šä¹‰
- æ–‡ä»¶æƒé™é—®é¢˜

**å·¥ä½œæµé”™è¯¯**ï¼š
- æ­¥éª¤ä¾èµ–å…³ç³»é”™è¯¯
- æ¡ä»¶è¡¨è¾¾å¼é”™è¯¯
- æ¨¡æ¿æ–‡ä»¶ç¼ºå¤±

**Agenté”™è¯¯**ï¼š
- æ¿€æ´»åºåˆ—é”™è¯¯
- èœå•å¤„ç†å™¨é”™è¯¯
- ä¸Šä¸‹æ–‡ä¸¢å¤±

#### 5.4.2 è°ƒè¯•æŠ€å·§

**æ—¥å¿—è®°å½•**ï¼š
```xml
<action>è®°å½•å½“å‰çŠ¶æ€åˆ°æ—¥å¿—æ–‡ä»¶</action>
<action>æ˜¾ç¤ºå½“å‰å˜é‡å€¼</action>
```

**æ–­ç‚¹è°ƒè¯•**ï¼š
```xml
<ask optional="true">æ˜¯å¦ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ­¥ï¼Ÿ</ask>
```

**çŠ¶æ€æ£€æŸ¥**ï¼š
```xml
<action>éªŒè¯å¿…è¦æ–‡ä»¶å­˜åœ¨</action>
<action>æ£€æŸ¥æƒé™è®¾ç½®</action>
```

---

## 6. å®æˆ˜æ¡ˆä¾‹ï¼šåŸºäºæ‚¨çš„é¡¹ç›®

### 6.1 é¡¹ç›®ç»“æ„åˆ†æ

æ‚¨çš„é¡¹ç›®æ˜¯ä¸€ä¸ªä½¿ç”¨Turborepoçš„composable commerceå¹³å°ï¼š

```
cs/
â”œâ”€â”€ apps/                          # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ storefront/               # Next.jså‰ç«¯
â”‚   â”œâ”€â”€ medusa/                   # å•†ä¸šåç«¯
â”‚   â””â”€â”€ strapi/                   # å†…å®¹ç®¡ç†
â”œâ”€â”€ packages/                     # å…±äº«åŒ…
â”œâ”€â”€ docs/                         # æ–‡æ¡£
â””â”€â”€ bmad/                         # BMADé…ç½®
```

### 6.2 BMADé›†æˆç­–ç•¥

#### 6.2.1 Agentè§’è‰²æ˜ å°„

**é¡¹ç›®ç‰¹æœ‰çš„Agentéœ€æ±‚**ï¼š
- **å…¨æ ˆå¼€å‘è€…**ï¼šç†Ÿæ‚‰Next.js + Medusa + Strapi
- **ç”µå•†ä¸“å®¶**ï¼šäº†è§£composable commerceæ¨¡å¼
- **åŸºç¡€è®¾æ–½å·¥ç¨‹å¸ˆ**ï¼šç†Ÿæ‚‰Railway/Verceléƒ¨ç½²

#### 6.2.2 å·¥ä½œæµå®šåˆ¶

**ç”µå•†ç‰¹è‰²å·¥ä½œæµ**ï¼š
```yaml
name: create-commerce-feature
description: "åˆ›å»ºç”µå•†åŠŸèƒ½ç”¨æˆ·æ•…äº‹"
variables:
  feature_type: "catalog|cart|checkout|account"
  integration_points: []

custom_validation:
  - check_medusa_api_compatibility
  - verify_strapi_content_schema
  - validate_storefront_integration
```

### 6.3 å®æ–½æ­¥éª¤

#### æ­¥éª¤1ï¼šæ‰©å±•ç°æœ‰Agent

```markdown
# å¢å¼ºçš„å¼€å‘è€…Agent
<persona>
  <role>Full Stack Commerce Developer</role>
  <identity>ä¸“ç²¾äºNext.js + Medusa + Strapiçš„ç”µå•†å¼€å‘è€…</identity>
  <specialization>
    - Next.js App Router + React Server Components
    - Medusa 2.x commerce backend
    - Strapi v5 headless CMS
    - PostgreSQL + Redis
  </specialization>
</persona>
```

#### æ­¥éª¤2ï¼šåˆ›å»ºç”µå•†ä¸“ç”¨å·¥ä½œæµ

**ç”µå•†æ•…äº‹åˆ›å»ºå·¥ä½œæµ**ï¼š
```yaml
name: create-commerce-story
description: "ä¸ºç”µå•†å¹³å°åˆ›å»ºç”¨æˆ·æ•…äº‹"

variables:
  commerce_domain: "catalog|cart|checkout|account|content"
  medusa_modules: []
  strapi_models: []
  storefront_components: []

domain_specific_checks:
  - éªŒè¯Medusaæ¨¡å—å…¼å®¹æ€§
  - æ£€æŸ¥Strapiå†…å®¹æ¨¡å‹
  - ç¡®è®¤å‰ç«¯ç»„ä»¶é›†æˆ
```

#### æ­¥éª¤3ï¼šé›†æˆç°æœ‰å·¥å…·é“¾

```yaml
# ä¸ç°æœ‰å·¥å…·çš„é›†æˆ
build_integration:
  - pnpm build
  - pnpm lint
  - pnpm test:unit

deployment_integration:
  - Railway service management
  - Vercel frontend deployment
  - Preview environments per PR
```

---

## 7. æ•…éšœæ’é™¤ä¸è°ƒè¯•

### 7.1 å¸¸è§é—®é¢˜è¯Šæ–­

#### 7.1.1 é…ç½®é—®é¢˜

**ç—‡çŠ¶**ï¼šAgentæ— æ³•åŠ è½½æˆ–å¯åŠ¨å¤±è´¥

**è¯Šæ–­æµç¨‹**ï¼š
```bash
# 1. æ£€æŸ¥é…ç½®æ–‡ä»¶å­˜åœ¨æ€§
ls -la bmad/bmm/config.yaml
ls -la bmad/core/config.yaml

# 2. éªŒè¯YAMLè¯­æ³•
yamllint bmad/bmm/config.yaml

# 3. æ£€æŸ¥è·¯å¾„å˜é‡
grep "{project-root}" bmad/bmm/config.yaml
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# ç¡®ä¿é…ç½®æ–‡ä»¶æ ¼å¼æ­£ç¡®
project_name: cs
user_name: Aiden Lux
communication_language: English
output_folder: '{project-root}/docs'
```

#### 7.1.2 å·¥ä½œæµæ‰§è¡Œé—®é¢˜

**ç—‡çŠ¶**ï¼šå·¥ä½œæµä¸­æ–­æˆ–è¾“å‡ºå¼‚å¸¸

**è¯Šæ–­æ­¥éª¤**ï¼š
```xml
<!-- åœ¨å·¥ä½œæµä¸­æ·»åŠ è°ƒè¯•ä¿¡æ¯ -->
<action>DEBUG: å½“å‰å˜é‡å€¼ - {{variable_name}}</action>
<action>DEBUG: æ£€æŸ¥æ–‡ä»¶å­˜åœ¨ - {file_path}</action>
```

**å¸¸è§åŸå› **ï¼š
- æ¨¡æ¿æ–‡ä»¶ç¼ºå¤±
- å˜é‡æœªæ­£ç¡®è§£æ
- æƒé™ä¸è¶³
- è·¯å¾„é”™è¯¯

#### 7.1.3 Agenté€šä¿¡é—®é¢˜

**ç—‡çŠ¶**ï¼šä¸Šä¸‹æ–‡ä¸¢å¤±æˆ–çŠ¶æ€ä¸åŒæ­¥

**æ£€æŸ¥æ¸…å•**ï¼š
```xml
<!-- éªŒè¯ä¸Šä¸‹æ–‡æ–‡ä»¶ -->
<action>æ£€æŸ¥Story Context XMLå­˜åœ¨</action>
<action>éªŒè¯çŠ¶æ€æ–‡ä»¶æ ¼å¼</action>
<action>ç¡®è®¤Agenté—´æ•°æ®ä¼ é€’</action>
```

### 7.2 æ€§èƒ½ä¼˜åŒ–

#### 7.2.1 æ–‡ä»¶åŠ è½½ä¼˜åŒ–

```xml
<!-- ä½¿ç”¨æ¡ä»¶åŠ è½½ -->
<check if="file_needed">
  <action>åŠ è½½å¿…è¦æ–‡ä»¶</action>
</check>

<!-- ç¼“å­˜é¢‘ç¹è®¿é—®çš„æ–‡ä»¶ -->
<action>ç¼“å­˜é…ç½®æ–‡ä»¶å†…å®¹</action>
```

#### 7.2.2 å˜é‡è§£æä¼˜åŒ–

```yaml
# é¢„è§£æå¸¸ç”¨å˜é‡
variables:
  project_root: "/home/coderisedev/code/cs"
  output_folder: "/home/coderisedev/code/cs/docs"

# é¿å…é‡å¤è§£æ
cached_vars:
  user_config: "{config_source}:user_name"
```

---

## 8. è¿›é˜¶æŠ€å·§ä¸ä¼˜åŒ–

### 8.1 é«˜çº§å·¥ä½œæµæ¨¡å¼

#### 8.1.1 å¹¶è¡Œå·¥ä½œæµ

```xml
<action>å¯åŠ¨å¹¶è¡Œå·¥ä½œæµ</action>
<invoke-workflow path="workflow-a.yaml" parallel="true"/>
<invoke-workflow path="workflow-b.yaml" parallel="true"/>
<action>ç­‰å¾…æ‰€æœ‰å·¥ä½œæµå®Œæˆ</action>
```

#### 8.1.2 æ¡ä»¶å·¥ä½œæµé“¾

```xml
<check if="condition_a">
  <invoke-workflow path="workflow-a.yaml"/>
</check>
<check if="condition_b">
  <invoke-workflow path="workflow-b.yaml"/>
</check>
```

#### 8.1.3 åŠ¨æ€å·¥ä½œæµé€‰æ‹©

```yaml
variables:
  workflow_type: "determined_by_context"

dynamic_workflow:
  catalog: "catalog-workflow.yaml"
  cart: "cart-workflow.yaml"
  checkout: "checkout-workflow.yaml"
```

### 8.2 Agentå¢å¼ºæŠ€å·§

#### 8.2.1 æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†

```xml
<agent>
  <activation>
    <step n="1">åŠ è½½é¡¹ç›®ä¸Šä¸‹æ–‡ç¼“å­˜</step>
    <step n="2">å¢é‡æ›´æ–°å˜åŒ–çš„éƒ¨åˆ†</step>
    <step n="3">éªŒè¯ä¸Šä¸‹æ–‡å®Œæ•´æ€§</step>
  </activation>
</agent>
```

#### 8.2.2 è‡ªé€‚åº”èœå•ç³»ç»Ÿ

```xml
<menu>
  <item cmd="*smart-action" workflow="auto-select.yaml">
    æ ¹æ®ä¸Šä¸‹æ–‡æ™ºèƒ½é€‰æ‹©æ“ä½œ
  </item>
  <item cmd="*recent-actions" workflow="recent.yaml">
    æ˜¾ç¤ºæœ€è¿‘ä½¿ç”¨çš„æ“ä½œ
  </item>
</menu>
```

### 8.3 é›†æˆå¤–éƒ¨å·¥å…·

#### 8.3.1 Gité›†æˆ

```xml
<action>æ£€æŸ¥GitçŠ¶æ€</action>
<invoke-task task="git-status.xml"/>
<action>åˆ›å»ºæäº¤</action>
<invoke-task task="git-commit.xml"/>
```

#### 8.3.2 CI/CDé›†æˆ

```yaml
deployment_automation:
  - è‡ªåŠ¨è§¦å‘æ„å»º
  - è¿è¡Œæµ‹è¯•å¥—ä»¶
  - éƒ¨ç½²åˆ°é¢„è§ˆç¯å¢ƒ
  - æ›´æ–°çŠ¶æ€æ–‡ä»¶
```

### 8.4 ç›‘æ§ä¸åˆ†æ

#### 8.4.1 æ€§èƒ½ç›‘æ§

```xml
<action>è®°å½•å·¥ä½œæµå¼€å§‹æ—¶é—´</action>
<action>æ‰§è¡Œä¸»è¦é€»è¾‘</action>
<action>è®°å½•å·¥ä½œæµç»“æŸæ—¶é—´</action>
<action>è®¡ç®—æ‰§è¡Œæ—¶é•¿</action>
```

#### 8.4.2 è´¨é‡åˆ†æ

```yaml
quality_metrics:
  - æ•…äº‹å®Œæˆç‡
  - ä»£ç è¦†ç›–ç‡
  - ç¼ºé™·å¯†åº¦
  - äº¤ä»˜å‘¨æœŸ
```

---

## ç»“è¯­

BMAD Agentå¼€å‘æ–¹æ³•è®ºé€šè¿‡ç»“æ„åŒ–çš„è§’è‰²æ‰®æ¼”å’Œæµç¨‹é©±åŠ¨ï¼Œä¸ºè½¯ä»¶å¼€å‘æä¾›äº†ä¸€å¥—å¯é‡å¤ã€å¯æ‰©å±•çš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡æœ¬æŒ‡å—çš„è¯¦ç»†è¯´æ˜ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿï¼š

1. **ç†è§£BMADçš„æ ¸å¿ƒåŸç†å’Œæ¶æ„**
2. **æŒæ¡Agentå’Œå·¥ä½œæµçš„å¼€å‘æ–¹æ³•**
3. **åº”ç”¨æœ€ä½³å®è·µé¿å…å¸¸è§é™·é˜±**
4. **æ ¹æ®é¡¹ç›®éœ€æ±‚å®šåˆ¶BMADç³»ç»Ÿ**

è®°ä½ï¼ŒBMADçš„æˆåŠŸå…³é”®åœ¨äºï¼š
- **æ ‡å‡†åŒ–**ï¼šä¿æŒç»“æ„å’Œæ ¼å¼çš„ä¸€è‡´æ€§
- **è‡ªåŠ¨åŒ–**ï¼šå‡å°‘äººå·¥å¹²é¢„ï¼Œæé«˜æ•ˆç‡
- **å¯è¿½æº¯æ€§**ï¼šè®°å½•æ¯ä¸ªå†³ç­–å’Œè¡ŒåŠ¨
- **æŒç»­æ”¹è¿›**ï¼šæ ¹æ®ä½¿ç”¨åé¦ˆä¸æ–­ä¼˜åŒ–

ç¥æ‚¨åœ¨BMAD Agentå¼€å‘ä¹‹è·¯ä¸Šå–å¾—æˆåŠŸï¼ğŸš€

---

*æœ¬æŒ‡å—åŸºäºæ‚¨çš„å®é™…é¡¹ç›®æ¡ˆä¾‹ç¼–å†™ï¼ŒåŒ…å«äº†å®Œæ•´çš„ç†è®ºæ¡†æ¶å’Œå®è·µæŒ‡å¯¼ã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒé¡¹ç›®ä¸­çš„å…·ä½“å®ç°ç¤ºä¾‹ã€‚*
# Medusa v2 金额单位说明 (美元 vs 美分)

关于 Medusa v2 中金额单位（美元还是美分）的逻辑说明。

## 1. 核心结论
在 Medusa v2 的**数据存储**和 **API 逻辑**中，金额单位仍然使用该货币的**最小单位 (Smallest Unit/Cents)**。

- **$10.00** 存储为 `1000`。
- **$6.00** 存储为 `600`。

## 2. 不同层级的表现

### A. 数据库层 (Database)
- **`amount` 字段**: 存储数值。对于 USD，`100` 代表 1 美元。
- **`raw_amount` (BigNumber)**: Medusa v2 引入的新字段，用于高精度计算。其 `value` 字符串默认也对应最小单位。

### B. 管理后台 (Admin UI)
- **自动转换**: 在新版 Admin 界面中，输入框通常会根据货币定义自动处理。
- 当你在美元货币的输入框输入 `10.00` 时，Admin 会自动将其乘以 100 并发送 `1000` 给后端 API。

### C. 代码开发层 (Service/Plugin)
- **始终使用分**: 在编写自定义插件（如 `calculatePrice`）或订阅器时，必须返回整数形式的最小单位。
- **示例**: 如果你的运费计算逻辑得出 5.5 美元，你应该返回 `550`。

## 3. 现状分析 (针对当前项目)
根据对数据库的分析，发现现有的 `Express` 选项 `amount` 为 `6` 但前端显示为 `$6.00`。这通常由以下原因造成：
1. **非标准写入**: 该数据可能是通过直接 SQL 插入或不规范的脚本写入的，绕过了 Medusa 的倍数转换。
2. **前端逻辑**: 某些 Storefront 可能会对未定义精度的数值进行容错处理，或者该货币的 `decimal_digits` 被意外设为了 0。

## 4. 开发建议
- **配置新运费时**: 请先进行一次测试（例如设置金额为 `1.00`），观察前端结账显示是 `$1.00` 还是 `$0.01`。
- **编写计算插件时**: 严格遵循 `金额 * 100` 的逻辑返回数据。

---
*最后更新日期: 2026-01-13*

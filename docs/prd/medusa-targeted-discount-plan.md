# 定向客户优惠券发放方案 (PRD)

针对“向特定老客户（Email 锁定）、针对特定产品、支持有效期及多种折扣类型”的需求，本方案推荐使用 Medusa 原生的 **“客户组 (Customer Groups) + 条件折扣 (Conditional Discounts)”** 策略。

## 1. 方案核心逻辑
通过 Medusa 的客户组功能锁定白名单 Email，并创建一个绑定该组的折扣码。该方案不需要额外开发插件，安全性高且管理成本低。

## 2. 为什么选择此方案？
*   **精准安全性：** 只有白名单内的 Email 登录后才能使用该券。即使折扣码泄露给他人，非组内成员也无法结账。
*   **支持多维度限制：** 完美支持指定产品、固定金额/百分比、开始/结束时间。
*   **用户友好：** 可以使用具有品牌感的 Code（如 `LOYALTY2026`），而非难以记忆的随机乱码。

## 3. 实施流程

### 第一步：构建客户白名单 (Customer Group)
1.  在 Medusa Admin 中进入 **Customers -> Groups**。
2.  创建一个新组：`Targeted_Promo_2026`（或类似名称）。
3.  将目标客户的 Email 添加至该组。
    *   *注：若客户尚未在系统中注册，需引导其先用该 Email 注册，或通过脚本预创建账号。*

### 第二步：配置折扣规则 (Discount Configuration)
1.  在 **Discounts** 页面创建新折扣，类型选择 **Standard**。
2.  **基础设置：**
    *   **Code:** 自定义一个易记的代码（如 `THANKYOU-CS`）。
    *   **Amount:** 设置固定金额或百分比。
3.  **配置 (Configuration)：**
    *   **Date:** 设置有效期（Start Date 和 End Date）。
    *   **Limit:** 开启 "Limit to 1 use per customer"（每人限用一次）。
4.  **条件 (Conditions) - 核心部分：**
    *   **Customer Groups:** 选择第一步创建的 `Targeted_Promo_2026` 组。
    *   **Products:** 搜索并选中指定的**特定产品**。

### 第三步：营销触达 (Distribution)
*   通过邮件系统向该组内的客户发送通知：“感谢您的支持，我们为您准备了专属优惠券 `THANKYOU-CS`，仅限您的账号在购买 [特定产品] 时使用，有效期至 [日期]。”

## 4. 方案对比分析

| 维度 | **推荐方案：客户组策略** | 备选方案：随机码插件 |
| :--- | :--- | :--- |
| **开发工作量** | **0** (纯配置) | **中** (需安装插件、维护 API 调用) |
| **安全性** | **极高** (账号+码双重校验) | **中** (仅校验码，除非额外写校验逻辑) |
| **维护成本** | **低** (只需维护一个客户名单) | **高** (需维护成百上千个独立券码) |
| **扩展性** | 以后可随时向组内增减人员 | 每次增发都需要重新生成新码 |

## 5. 结论
本方案利用 Medusa 的原生架构，以最轻量化的方式实现了最高安全级别的定向营销。建议立即按照此流程在 Admin 后台进行配置测试。

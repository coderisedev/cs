# ===========================================
# Medusa Environment Configuration
# ===========================================
# Copy this file to .env for local development
# Use bootstrap.ts script to generate environment-specific files

# -------------------------------------------
# Application Configuration
# -------------------------------------------
MEDUSA_ADMIN_ONBOARDING_TYPE=default

# Storefront URL (used for password reset emails, etc.)
STORE_URL=https://cockpitsimulator.com

# -------------------------------------------
# CORS Configuration (Environment-specific)
# -------------------------------------------
# Local: http://localhost:3000
# Preview: https://cs-preview.vercel.app
# Staging: https://cs-staging.vercel.app
# Production: https://cs.com
STORE_CORS=http://localhost:3000,https://cs-preview.vercel.app,https://cs-staging.vercel.app,https://cs.com

# Local: http://localhost:7000,http://localhost:9000
# Preview: https://medusa-preview.cs.com
# Staging: https://medusa-staging.cs.com
# Production: https://medusa.cs.com
ADMIN_CORS=http://localhost:7000,http://localhost:9000,https://medusa-preview.cs.com,https://medusa-staging.cs.com,https://medusa.cs.com

# Local: http://localhost:3000,http://localhost:9000
# Preview: https://cs-preview.vercel.app
# Staging: https://cs-staging.vercel.app
# Production: https://cs.com
AUTH_CORS=http://localhost:3000,http://localhost:9000,https://cs-preview.vercel.app,https://cs-staging.vercel.app,https://cs.com

# -------------------------------------------
# Database Configuration (Environment-specific)
# -------------------------------------------
# Local: postgres://cs:cs@127.0.0.1:5432/medusa_local
# Preview/Production: Configured via Pulumi/Railway managed database
DATABASE_URL=postgres://cs:cs@127.0.0.1:5432/medusa_local

# Individual database parameters (fallback if DATABASE_URL not set)
PGHOST=127.0.0.1
PGPORT=5432
PGUSER=cs
PGPASSWORD=cs
PGDATABASE=medusa_local
DB_NAME=medusa_local

# -------------------------------------------
# Redis Configuration (Environment-specific)
# -------------------------------------------
# Local: redis://127.0.0.1:6379
# Preview/Production: Configured via Pulumi/Railway managed Redis
REDIS_URL=redis://127.0.0.1:6379

# -------------------------------------------
# Security Configuration
# -------------------------------------------
# Generate with: openssl rand -base64 32
JWT_SECRET=change-me-in-production
COOKIE_SECRET=change-me-in-production

# -------------------------------------------
# Authentication Providers
# -------------------------------------------
# Google One Tap / OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
# e.g. https://localhost:3000/auth/google/callback (must match Google console entry)
GOOGLE_OAUTH_CALLBACK_URL=http://localhost:3000/auth/google/callback
# Comma-separated list of origins allowed to exchange tokens (optional helper)
GOOGLE_ALLOWED_ORIGINS=http://localhost:3000,https://cs-preview.vercel.app,https://cs-staging.vercel.app,https://www.cockpit-simulator.com

# -------------------------------------------
# Payment Providers
# -------------------------------------------
# PayPal - register at https://developer.paypal.com
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-client-secret
PAYPAL_IS_SANDBOX=true

# Stripe - register at https://dashboard.stripe.com/apikeys
STRIPE_API_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret

# -------------------------------------------
# Email Configuration
# -------------------------------------------
# Resend - register at https://resend.com/api-keys
RESEND_API_KEY=re_xxxxxxxxxxxx
RESEND_FROM_EMAIL=noreply@cockpitsimulator.com
RESEND_FROM_NAME=Cockpit Simulator

# SendGrid (legacy) - register at https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@cs.com
SENDGRID_FROM_NAME=Cockpit Simulator

# -------------------------------------------
# Storage & CDN
# -------------------------------------------
# Cloudflare R2 for file storage (shared with Strapi)
R2_ACCOUNT_ID=your-r2-account-id
R2_ACCESS_KEY_ID=your-r2-access-key
R2_SECRET_ACCESS_KEY=your-r2-secret-key
R2_BUCKET_NAME=cstrapi
R2_PUBLIC_URL=https://assets.cs.com

# S3-compatible variables consumed by the Medusa file service
AWS_ACCESS_KEY_ID=your-r2-access-key
AWS_SECRET_ACCESS_KEY=your-r2-secret-key
AWS_BUCKET_NAME=cstrapi
AWS_REGION=auto
AWS_ENDPOINT=https://<account-id>.r2.cloudflarestorage.com
AWS_PUBLIC_URL=https://img.example.com
AWS_FORCE_PATH_STYLE=true

# Medusa-specific overrides
MEDUSA_FILE_PREFIX=medusa-uploads/
MEDUSA_FILE_PUBLIC_URL=https://img.example.com
MEDUSA_FILE_CACHE_CONTROL=public, max-age=31536000
MEDUSA_FILE_DOWNLOAD_TTL=3600
MEDUSA_FILE_FORCE_PATH_STYLE=true

# -------------------------------------------
# Analytics & Monitoring
# -------------------------------------------
# Sentry Error Tracking
SENTRY_DSN=your-sentry-dsn
SENTRY_AUTH_TOKEN=your-sentry-auth-token

# -------------------------------------------
# Feature Flags
# -------------------------------------------
# Enable/disable features per environment
ENABLE_ANALYTICS=true
ENABLE_ERROR_REPORTING=true
ENABLE_PAYMENT_PROCESSING=true
ENABLE_EMAIL_NOTIFICATIONS=true

# -------------------------------------------
# Development Settings
# -------------------------------------------
# Enable development-specific features
DEBUG_MODE=false
ENABLE_DEV_TOOLS=false
ENABLE_SWAGGER=true
